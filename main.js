    // Translations object with Spanish added
    const translations = {
      fr: {
        // Navigation
        "about": "À propos",
        "skills": "Compétences",
        "projects": "Projets",
        "contact": "Contact",
        
        // Header
        "name": "Emmanuel Selicour",
        "title": "Travailleur Digital | Centre d'Appel | Marketing | Informatique | Langues",
        
        // About
        "about_me": "Qui suis-je ?",
        "bio1": "Je m'appelle Emmanuel Selicour, surnommé 'True Manno'. Je suis un jeune professionnel passionné avec de l'expérience dans plusieurs domaines : développement web, centre d'appel, marketing digital, e-commerce et plus encore. Je suis une personne sérieuse, flexible et toujours en apprentissage pour évoluer chaque jour.",
        "bio2": "Je crois au pouvoir de la connaissance et à la valeur du travail acharné. Mon objectif est de fournir des solutions efficaces et créatives dont tout le monde peut bénéficier.",
        
        // Skills
        "my_skills": "Mes Compétences",
        "call_center": "Expérience en Centre d'Appel",
        "digital_marketing": "Expérience en Marketing Digital",
        "web_dev": "Développement Web",
        "communication": "Communication",
        "learning": "en apprentissage",
        "languages": "Langues",
        
        // Skill items
        "skill1": "Gestion d'appels clients en français et créole",
        "skill2": "Communication claire et efficace",
        "skill3": "Utilisation de logiciels CRM",
        "skill4": "Création et gestion de campagnes sur les réseaux sociaux",
        "skill5": "SEO & marketing de contenu",
        "skill6": "Email marketing & analytics",
        "skill7": "Design responsive & mobile",
        "skill8": "Création de sites vitrine & e-commerce",
        "skill9": "Communication interpersonnelle efficace",
        "skill10": "Rédaction professionnelle",
        "skill11": "Techniques de présentation",
        "skill12": "Communication d'équipe",
        "lang1": "Créole haïtien (langue maternelle)",
        "lang2": "Français (avancé)",
        "lang3": "Anglais (conversationnel)",
        "lang4": "Espagnol (notions)",
        
        // Projects
        "my_projects": "Mes Projets",
        "project1_title": "Portfolio Professionnel",
        "project1_desc": "Mon portfolio personnel développé avec HTML, CSS et JavaScript. Design moderne et responsive.",
        "project2_title": "WPC Company World Center",
        "project2_desc": "Site web professionnel pour une entreprise de centre d'appel avec présentation des services.",
        "project3_title": "Evolution Service Digitale (EDS)",
        "project3_desc": "Plateforme de services digitaux offrant des solutions complètes pour entreprises et particuliers.",
        "view_project": "Voir le site",
        
        // Download CV
        "download_cv": "Télécharger mon CV",
        
        // Contact
        "contact_me": "Contactez-moi",
        "form_name": "Votre nom",
        "form_email": "Votre email",
        "form_message": "Message",
        "form_send": "Envoyer",
        
        // Footer
        "footer_dev": "SITE DÉVELOPPÉ PAR : TRUE MANNO",
        
        // Alert
        "alert_title": "Message envoyé!",
        "alert_message": "Merci pour votre message. Je vous répondrai dès que possible.",
        "alert_ok": "OK"
      },
      en: {
        // Navigation
        "about": "About",
        "skills": "Skills",
        "projects": "Projects",
        "contact": "Contact",
        
        // Header
        "name": "Emmanuel Selicour",
        "title": "Digital Worker | Call Center | Marketing | IT | Languages",
        
        // About
        "about_me": "About Me",
        "bio1": "My name is Emmanuel Selicour, nicknamed 'True Manno'. I am a passionate young professional with experience in several fields: web development, call center, digital marketing, e-commerce and more. I am a serious, flexible person always learning to grow every day.",
        "bio2": "I believe in the power of knowledge and the value of hard work. My goal is to provide effective and creative solutions that benefit everyone.",
        
        // Skills
        "my_skills": "My Skills",
        "call_center": "Call Center Experience",
        "digital_marketing": "Digital Marketing Experience",
        "web_dev": "Web Development",
        "communication": "Communication",
        "learning": "learning",
        "languages": "Languages",
        
        // Skill items
        "skill1": "Customer call management in French and Creole",
        "skill2": "Clear and effective communication",
        "skill3": "CRM software usage",
        "skill4": "Creation and management of social media campaigns",
        "skill5": "SEO & content marketing",
        "skill6": "Email marketing & analytics",
        "skill7": "Responsive & mobile design",
        "skill8": "Creation of showcase sites & e-commerce",
        "skill9": "Effective interpersonal communication",
        "skill10": "Professional writing",
        "skill11": "Presentation techniques",
        "skill12": "Team communication",
        "lang1": "Haitian Creole (native language)",
        "lang2": "French (advanced)",
        "lang3": "English (conversational)",
        "lang4": "Spanish (basic knowledge)",
        
        // Projects
        "my_projects": "My Projects",
        "project1_title": "Professional Portfolio",
        "project1_desc": "My personal portfolio developed with HTML, CSS and JavaScript. Modern and responsive design.",
        "project2_title": "WPC Company World Center",
        "project2_desc": "Professional website for a call center company with services presentation.",
        "project3_title": "Evolution Service Digitale (EDS)",
        "project3_desc": "Digital services platform offering complete solutions for businesses and individuals.",
        "view_project": "View site",
        
        // Download CV
        "download_cv": "Download my CV",
        
        // Contact
        "contact_me": "Contact Me",
        "form_name": "Your name",
        "form_email": "Your email",
        "form_message": "Message",
        "form_send": "Send",
        
        // Footer
        "footer_dev": "SITE DEVELOPED BY: TRUE MANNO",
        
        // Alert
        "alert_title": "Message sent!",
        "alert_message": "Thank you for your message. I will get back to you as soon as possible.",
        "alert_ok": "OK"
      },
      es: {
        // Navigation
        "about": "Sobre mí",
        "skills": "Habilidades",
        "projects": "Proyectos",
        "contact": "Contacto",
        
        // Header
        "name": "Emmanuel Selicour",
        "title": "Trabajador Digital | Centro de Llamadas | Marketing | Informática | Idiomas",
        
        // About
        "about_me": "¿Quién soy?",
        "bio1": "Me llamo Emmanuel Selicour, apodado 'True Manno'. Soy un joven profesional apasionado con experiencia en varios campos: desarrollo web, centro de llamadas, marketing digital, comercio electrónico y más. Soy una persona seria, flexible y siempre en aprendizaje para evolucionar cada día.",
        "bio2": "Creo en el poder del conocimiento y el valor del trabajo duro. Mi objetivo es proporcionar soluciones efectivas y creativas de las que todos puedan beneficiarse.",
        
        // Skills
        "my_skills": "Mis Habilidades",
        "call_center": "Experiencia en Centro de Llamadas",
        "digital_marketing": "Experiencia en Marketing Digital",
        "web_dev": "Desarrollo Web",
        "communication": "Comunicación",
        "learning": "en aprendizaje",
        "languages": "Idiomas",
        
        // Skill items
        "skill1": "Gestión de llamadas de clientes en francés y criollo",
        "skill2": "Comunicación clara y efectiva",
        "skill3": "Uso de software CRM",
        "skill4": "Creación y gestión de campañas en redes sociales",
        "skill5": "SEO y marketing de contenidos",
        "skill6": "Email marketing y analytics",
        "skill7": "Diseño responsive y móvil",
        "skill8": "Creación de sitios vitrina y e-commerce",
        "skill9": "Comunicación interpersonal efectiva",
        "skill10": "Redacción profesional",
        "skill11": "Técnicas de presentación",
        "skill12": "Comunicación de equipo",
        "lang1": "Criollo haitiano (lengua materna)",
        "lang2": "Francés (avanzado)",
        "lang3": "Inglés (conversacional)",
        "lang4": "Español (nociones básicas)",
        
        // Projects
        "my_projects": "Mis Proyectos",
        "project1_title": "Portfolio Profesional",
        "project1_desc": "Mi portfolio personal desarrollado con HTML, CSS y JavaScript. Diseño moderno y responsive.",
        "project2_title": "WPC Company World Center",
        "project2_desc": "Sitio web profesional para una empresa de centro de llamadas con presentación de servicios.",
        "project3_title": "Evolution Service Digitale (EDS)",
        "project3_desc": "Plataforma de servicios digitales que ofrece soluciones completas para empresas y particulares.",
        "view_project": "Ver sitio",
        
        // Download CV
        "download_cv": "Descargar mi CV",
        
        // Contact
        "contact_me": "Contáctame",
        "form_name": "Tu nombre",
        "form_email": "Tu email",
        "form_message": "Mensaje",
        "form_send": "Enviar",
        
        // Footer
        "footer_dev": "SITIO DESARROLLADO POR: TRUE MANNO",
        
        // Alert
        "alert_title": "¡Mensaje enviado!",
        "alert_message": "Gracias por tu mensaje. Te responderé lo antes posible.",
        "alert_ok": "OK"
      }
    };

    // Language and location detection
    let currentLang = 'fr';

    // Function to detect user's country and set language accordingly
    function detectUserLanguage() {
      // Check if language is already saved in cookie/localStorage
      const savedLang = getCookie('preferredLang') || localStorage.getItem('preferredLang');
      if (savedLang && ['fr', 'en', 'es'].includes(savedLang)) {
        return savedLang;
      }

      // Detect browser language
      const browserLang = navigator.language || navigator.userLanguage;
      const primaryLang = browserLang.split('-')[0].toLowerCase();
      
      // Map countries to languages
      const countryToLang = {
        // French-speaking countries
        'fr': 'fr', 'be': 'fr', 'ch': 'fr', 'ca': 'fr', 'lu': 'fr', 'mc': 'fr',
        // English-speaking countries
        'us': 'en', 'gb': 'en', 'au': 'en', 'ca': 'en', 'nz': 'en', 'ie': 'en',
        // Spanish-speaking countries
        'es': 'es', 'mx': 'es', 'ar': 'es', 'co': 'es', 'pe': 'es', 've': 'es',
        'cl': 'es', 'ec': 'es', 'gt': 'es', 'cu': 'es', 'do': 'es', 'bo': 'es',
        'hn': 'es', 'py': 'es', 'sv': 'es', 'ni': 'es', 'cr': 'es', 'pr': 'es',
        'pa': 'es', 'uy': 'es', 'gq': 'es'
      };

      // Try to detect country using IP (fallback method)
      return new Promise((resolve) => {
        // First try with browser language
        if (primaryLang === 'fr' || primaryLang === 'en' || primaryLang === 'es') {
          resolve(primaryLang);
          return;
        }

        // Fallback to geolocation API (free service)
        fetch('https://ipapi.co/country/')
          .then(response => response.text())
          .then(countryCode => {
            const detectedLang = countryToLang[countryCode.toLowerCase()] || 'en';
            resolve(detectedLang);
          })
          .catch(() => {
            // Final fallback based on browser language
            const fallbackLang = ['fr', 'en', 'es'].includes(primaryLang) ? primaryLang : 'en';
            resolve(fallbackLang);
          });
      });
    }

    // Cookie functions
    function setCookie(name, value, days) {
      const expires = new Date();
      expires.setTime(expires.getTime() + (days * 24 * 60 * 60 * 1000));
      document.cookie = name + '=' + value + ';expires=' + expires.toUTCString() + ';path=/';
    }

    function getCookie(name) {
      const value = '; ' + document.cookie;
      const parts = value.split('; ' + name + '=');
      if (parts.length === 2) return parts.pop().split(';').shift();
    }

    // Language management
    function setLanguage(lang) {
      currentLang = lang;
      
      // Save preferences
      setCookie('preferredLang', lang, 365);
      localStorage.setItem('preferredLang', lang);
      
      // Update language buttons
      document.querySelectorAll('.lang-btn').forEach(btn => {
        btn.classList.remove('active');
      });
      document.getElementById(`lang-${lang}`).classList.add('active');
      
      // Update all translatable elements
      document.querySelectorAll('[data-translate]').forEach(element => {
        const key = element.getAttribute('data-translate');
        if (translations[lang] && translations[lang][key]) {
          element.textContent = translations[lang][key];
        }
      });
      
      // Update HTML lang attribute
      document.documentElement.lang = lang;
      
      // Update placeholders for form inputs
      updateFormPlaceholders(lang);
    }

    function updateFormPlaceholders(lang) {
      const nameInput = document.getElementById('name');
      const emailInput = document.getElementById('email');
      const messageInput = document.getElementById('message');
      
      if (nameInput) nameInput.placeholder = translations[lang]['form_name'];
      if (emailInput) emailInput.placeholder = translations[lang]['form_email'];
      if (messageInput) messageInput.placeholder = translations[lang]['form_message'];
    }

    // LOADER
    window.addEventListener("load", () => {
      document.getElementById("loader").style.display = "none";
    });

    // DARK MODE
    const toggle = document.querySelector(".dark-mode-toggle");
    toggle.addEventListener("click", () => {
      document.body.classList.toggle("dark-mode");
      toggle.innerHTML = document.body.classList.contains("dark-mode")
        ? '<i class="fas fa-sun"></i>'
        : '<i class="fas fa-moon"></i>';
    });

    // PROGRESS BAR
    const progressBar = document.querySelector(".progress-bar");
    window.addEventListener("scroll", () => {
      const scrollTop = window.scrollY;
      const docHeight = document.body.scrollHeight - window.innerHeight;
      const progress = (scrollTop / docHeight) * 100;
      progressBar.style.width = `${progress}%`;
    });

    // ANIMATE SKILLS
    const skills = document.querySelectorAll(".skill");
    const showSkills = () => {
      skills.forEach(skill => {
        const rect = skill.getBoundingClientRect();
        if (rect.top < window.innerHeight - 100) {
          skill.classList.add("visible");
        }
      });
    };
    window.addEventListener("scroll", showSkills);
    showSkills();

    // Custom Alert Modal
    const customAlert = document.getElementById('customAlert');
    const closeAlert = document.querySelector('.close-alert');
    const alertOk = document.getElementById('alert-ok');

    function showAlert() {
      // Update alert content based on current language
      document.getElementById('alert-title').textContent = translations[currentLang]['alert_title'];
      document.getElementById('alert-message').textContent = translations[currentLang]['alert_message'];
      document.getElementById('alert-ok').textContent = translations[currentLang]['alert_ok'];
      
      customAlert.style.display = 'flex';
    }

    function hideAlert() {
      customAlert.style.display = 'none';
    }

    closeAlert.addEventListener('click', hideAlert);
    alertOk.addEventListener('click', hideAlert);

    // Form submission with custom alert
    document.querySelector('.contact-form').addEventListener('submit', function(e) {
      e.preventDefault();
      const form = e.target;
      
      fetch(form.action, {
        method: 'POST',
        body: new FormData(form),
        headers: {
          'Accept': 'application/json'
        }
      })
      .then(response => {
        if (response.ok) {
          showAlert();
          form.reset();
        } else {
          throw new Error('Network error');
        }
      })
      .catch(error => {
        // Update alert for error
        document.getElementById('alert-title').textContent = translations[currentLang]['alert_title'];
        document.getElementById('alert-message').textContent = 
          currentLang === 'fr' 
            ? "Erreur lors de l'envoi. Veuillez réessayer." 
            : currentLang === 'en'
            ? "Error sending message. Please try again."
            : "Error al enviar el mensaje. Por favor, inténtelo de nuevo.";
        showAlert();
      });
    });

    // Language switcher event listeners
    document.getElementById('lang-fr').addEventListener('click', () => setLanguage('fr'));
    document.getElementById('lang-en').addEventListener('click', () => setLanguage('en'));
    document.getElementById('lang-es').addEventListener('click', () => setLanguage('es'));

    // Initialize language on page load
    document.addEventListener('DOMContentLoaded', async () => {
      // Show loader
      document.getElementById("loader").style.display = "flex";
      
      try {
        const detectedLang = await detectUserLanguage();
        setLanguage(detectedLang);
      } catch (error) {
        // Fallback to French if detection fails
        setLanguage('fr');
      }
      
      // Hide loader after a short delay to ensure smooth transition
      setTimeout(() => {
        document.getElementById("loader").style.display = "none";
      }, 500);
    });

    // Smooth scrolling for navigation links
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
      anchor.addEventListener('click', function (e) {
        e.preventDefault();
        const target = document.querySelector(this.getAttribute('href'));
        if (target) {
          target.scrollIntoView({
            behavior: 'smooth',
            block: 'start'
          });
        }
      });
    });

    // Add loaded class to iframes when they finish loading
    document.addEventListener('DOMContentLoaded', function() {
      const iframes = document.querySelectorAll('.project-image iframe');
      iframes.forEach(iframe => {
        iframe.addEventListener('load', function() {
          this.classList.add('loaded');
        });
      });
    });
